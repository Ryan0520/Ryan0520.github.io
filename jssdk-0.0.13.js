/*!
 * JS-SDK v0.0.13 2022
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("tslib")):"function"==typeof define&&define.amd?define(["exports","tslib"],n):n((e=e||self).RNWebView={},e.tslib)}(this,function(e,o){"use strict";function t(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("workplus")}function r(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("android")}function i(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("iPhone")}function f(e){return"[object Function]"===Object.prototype.toString.call(e)}var n=(u.prototype.disable=function(){this._enabled=!1},u.prototype.enable=function(){this._enabled=!0},u.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.log(this._PREFIX+"[Log]: "+e.join(" "))},u.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.warn(this._PREFIX+"[Warn]: "+e.join(" "))},u.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.error(this._PREFIX+"[Error]: "+e.join(" "))},u);function u(e){void 0===e&&(e=!1),this._PREFIX="JS-SDK ",this._enabled=e}var l="WorkPlus_Image",s="WorkPlus_Contact",c="WorkPlus_Auth",a="WorkPlus_WebView",d="WorkPlus_Email",v="Workplus_Pay",p="WorkPlus_BarcodeScanner",m="WorkPlus_DeviceInfo",_="WorkPlus_Location",g="WorkPlus_EventLog",h="WorkPlus_Files",w="WorkPlus_NetInfo",y="WorkPlus_Network",b="WorkPlus_BarcodeScanner",P="WorkPlus_LightApp",k="WorkPlus_PublicClound",I="WorkPlus_AppStore",S="WorkPlus_Config",L="WorkPlus_DATA",O="WorkPlus_Dialog",W="WorkPlus_AudioAndVideo",U="WorkPlus_Notification",R=Object.freeze({__proto__:null,WORKPLUS_IMAGE:l,WORKPLUS_CONTACT:s,WORKPLUS_AUTH:c,WORKPLUS_WEBVIEW:a,WORKPLUS_EMAIL:d,WORKPLUS_PAY:v,WORKPLUS_SCAN:p,WORKPLUS_DEVICE:m,WORKPLUS_LOCATION:_,WORKPLUS_EVENTLOG:g,WORKPLUS_FILE:h,WORKPLUS_NETINFO:w,WORKPLUS_NETWORK:y,WORKPLUS_BARCODE_SCANNER:b,WORKPLUS_LIGHT_APP:P,WORKPLUS_PUBLIC_CLOUND:k,WORKPLUS_APP_STORE:I,WORKPLUS_CONFIG:S,WORKPLUS_DATA:L,WORKPLUS_DIALOG:O,WORKPLUS_BEHAVIOR_LOG:"WorkPlus_BehaviorLog",WORKPLUS_AUDIO_AND_VIDEO:W,WORKPLUS_NOTIFICATION:U}),C={},E=R;Object.keys(E).map(function(e){var n;e.includes("WORKPLUS_")&&(n=e.replace("WORKPLUS_","").toLocaleLowerCase(),C[E[e]]=n)});function A(){var i=this;this._deviceready=!1,this._logger=new n,this._timeout=5e3,this._mock=!1,this._mockData=Object.create(null),this.init=function(e){if(i._logger||(i._logger=new n),null!=e&&e.debug&&(i._logger.enable(),i._logger.warn("SDK 已开启调试模式")),"undefined"!=typeof window&&"[object Window]"===Object.prototype.toString.call(window)){if(i._logger.warn("SDK 已"+(null!=e&&e.auth?"开启":"关闭")+"接口鉴权"),i._timeout=(null==e?void 0:e.timeout)||5e3,i._logger.warn("SDK 设置的超时时间为: "+i._timeout+"ms"),null!=e&&e.mock)i._mock=null==e?void 0:e.mock,null!=e&&e.mockData&&(i._mockData=null==e?void 0:e.mockData);else if(!t())return void i._logger.error("请在 WorkPlus APP 内打开应用")}else i._logger.error("不支持非浏览器环境")},this.deviceready=function(t){return new Promise(function(e){function n(){return t&&f(t)&&t()}i.isDeviceReady?(e(),n()):document.addEventListener("deviceready",function(){i._logger.warn("设备已就绪！（deviceready 事件被触发）"),i._setDeviceReady(!0),e(),n()},!1)})},this.error=function(e){f(e)?i._errorCallback=e:i._logger.error("错误监听回调仅支持函数参数")}}var D=new(A.prototype.onError=function(e){this._errorCallback&&f(this._errorCallback)&&this._errorCallback(e)},A.prototype._setDeviceReady=function(e){this._deviceready=e},Object.defineProperty(A.prototype,"isDeviceReady",{get:function(){return this._deviceready},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"timeout",{get:function(){return this._timeout},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"mock",{get:function(){return this._mock},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"mockData",{get:function(){return this._mockData},enumerable:!1,configurable:!0}),A),B=D.init,T=D.deviceready,x=D.error,j=D.logger;var K=function(n){if("object"==typeof n)return n;if("boolean"==typeof n)return n;try{return JSON.parse(n)}catch(e){return{result:n}}};function N(u,l,s,c,a,d){return void 0===d&&(d=!0),new Promise(function(t,n){function i(){e&&clearTimeout(e)}var o=u+"."+l,e=d?setTimeout(function(e){void 0===e&&(e="接口调用超时"),j.warn(o+" 接口调用响应超时，请重试"),a&&f(a)&&a(e),n(e)},D.timeout):0;try{if(D.mock){var r=function(n,t){var e=D.mockData[C[n]];if(e&&e[t]&&f(e[t])){var i=Object.create(null);j.log("执行 "+n+"."+t+" Mock 调用");try{i=e[t](),j.log("执行 "+n+"."+t+" Mock 返回结果: "+JSON.stringify(i,null,4))}catch(e){j.log("执行 "+n+"."+t+" Mock 发生错误: "+JSON.stringify(e,null,4))}return i}return!1}(u,l);if(r)return i(),void t(r)}D.deviceready(function(){j.log("准备调用 "+o),cordova.exec(function(e){i();var n=K(e);return j.log(o+" 调用成功: "+JSON.stringify(n,null,4)),c&&f(c)&&c(n),t(n)},function(e){return i(),j.error(o+" 接口调用失败"),D.onError(o+" 调用失败: "+e),a&&f(a)&&a(e),n(e)},u,l,s)})}catch(e){D.onError(e)}})}function z(e,n,t){var i=e+"."+n;j.log("同步调用 "+i);D.deviceready(function(){cordova.exec(function(e){j.log(JSON.stringify(e,null,4))},function(e){j.error(JSON.stringify(e,null,4)),D.onError(i+" 调用失败: "+e)},e,n,t)})}function M(i){return new Promise(function(n,t){var e;r()&&(i="file://"+i),e=i,new Promise(function(n,t){window.resolveLocalFileSystemURL(e,function(e){n(e)},function(e){t(e)})}).then(function(e){e.file(function(e){n(e)},function(e){t(e)})}).catch(function(e){t(e)})})}function F(t){return new Promise(function(n){var e=new FileReader;e.onloadend=function(e){n(e)},e.readAsDataURL(t)})}var V={takePicture:function(e){return N(l,"takePicture",[{editable:(null==e?void 0:e.editable)||!1}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},takePhotoAndAddWaterMark:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(l,"takePhotoAndAddWaterMark",[{content:i.content,font_size:i.fontSize,color:i.color,mark_disable:i.markDisable,time_enable:i.timeEnable,location_enable:i.locationEnable}],n,t,!1)},saveImages:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(l,"saveImages",[i],n,t,!1)},showImages:function(e){return z(l,"showImages",[e])},chooseImages:function(e){var n,t,i,o={multiple:(null==e?void 0:e.multiple)||!0,imageKeys:(null==e?void 0:e.imageKeys)||[],file_limit:{max_select_count:(null===(n=null==e?void 0:e.fileLimit)||void 0===n?void 0:n.maxSelectCount)||9,single_select_size:(null===(t=null==e?void 0:e.fileLimit)||void 0===t?void 0:t.singleSelectSize)||-1,total_select_size:(null===(i=null==e?void 0:e.fileLimit)||void 0===i?void 0:i.totalSelectSize)||-1}};return N(l,"chooseImages",[o],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},actionForLongPressImage:function(e){return z(l,"actionForLongPressImage",[e])},cleanCompressImage:function(){return z(l,"cleanCompressImage",[])},toBase64:function(n){return M(n.filePath).then(F).then(function(e){return n.success&&f(n.success)&&n.success(e),Promise.resolve(e)}).catch(function(e){return n.fail&&f(n.fail)&&n.fail(e),Promise.reject(e)})}};var q=Object.freeze({__proto__:null,getSingleContact:function(e){return N(s,"getContact",[{hideMe:(null==e?void 0:e.hideMe)||!1,filterSenior:(null==e?void 0:e.filterSenior)||1}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},getContacts:function(e){return N(s,"getContacts",[{selectedContacts:(null==e?void 0:e.selectedContacts)||[],hideMe:(null==e?void 0:e.hideMe)||!1,filterSenior:(null==e?void 0:e.filterSenior)||1}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},getEmployeesFromCurrentOrg:function(e){return N(s,"getEmployeesFromCurrentOrg",[{selectedEmpList:(null==e?void 0:e.selectedEmpList)||[],hideMe:(null==e?void 0:e.hideMe)||!1,filterSenior:(null==e?void 0:e.filterSenior)||1}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},selectContacts:function(e){return N(s,"selectContacts",[{filterSenior:(null==e?void 0:e.filterSenior)||1,maxCount:(null==e?void 0:e.maxCount)||-1,selectedUsers:(null==e?void 0:e.selectedUsers)||[],selectedEmployees:(null==e?void 0:e.selectedEmployees)||[]}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},getMobileContacts:function(e){return N(s,"getMobileContacts",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var J=Object.freeze({__proto__:null,getLocation:function(e){return N(_,"getLocation",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var G={getDeviceInfo:function(e){return N(m,"getDeviceInfo",[],null==e?void 0:e.success,null==e?void 0:e.fail)},getIpAddress:function(e){return N(m,"getIpAddress",[],null==e?void 0:e.success,null==e?void 0:e.fail)},getPedometerData:function(e){return N(m,"getPedometerData",[],null==e?void 0:e.success,null==e?void 0:e.fail)},getAppInfo:function(e){return N(k,"getAppInfo",[],null==e?void 0:e.success,null==e?void 0:e.fail)}};var H={getEventLogs:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(g,"getEventLogs",[i],n,t)},getTodayUseDuration:function(e){return N(g,"getTodayUseDuration",[],null==e?void 0:e.success,null==e?void 0:e.fail)}};function Q(e){this.fileTransferInstance=new FileTransfer,this.fileUploadOptions=e}var X={chooseFiles:function(e){var n,t,i,o={multiple:(null==e?void 0:e.multiple)||!0,file_keys:(null==e?void 0:e.fileKeys)||[],file_limit:{max_select_count:(null===(n=null==e?void 0:e.fileLimit)||void 0===n?void 0:n.maxSelectCount)||9,single_select_size:(null===(t=null==e?void 0:e.fileLimit)||void 0===t?void 0:t.singleSelectSize)||-1,total_select_size:(null===(i=null==e?void 0:e.fileLimit)||void 0===i?void 0:i.totalSelectSize)||-1}};return N(h,"chooseFiles",[o],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},isFileExist:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(h,"isFileExist",[i],n,t,!1)},openFileDetail:function(e){return z(h,"showFile",[e])},readFile:function(e){return z(h,"readFile",[e])},download:function(o){return new Promise(function(n,t){var e,i;(new FileTransfer).download(encodeURI(o.source),o.target,function(e){null!=o&&o.success(e),n(e)},function(e){null!=o&&o.fail(e),t(e)},null!==(e=o.trustAllHosts)&&void 0!==e&&e,null!==(i=o.options)&&void 0!==i?i:{})})},upload:(Q.prototype.upload=function(i){var e=this;return new Promise(function(n,t){e.fileTransferInstance.onprogress=function(e){var n=e.loaded,t=e.total;i.progress&&f(i.progress)&&i.progress(n,t)},e.fileTransferInstance.upload(i.fileURL,encodeURI(i.server),function(e){return 200===e.responseCode?(i.success&&f(i.success)&&i.success(e),n(e)):t(e)},function(e){i.fail&&f(i.fail)&&i.fail(e),t(e)},e.fileUploadOptions,i.trustAllHosts)})},Q.prototype.abort=function(){this.fileTransferInstance.abort()},Q),getFilePath:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(h,"getUserFilePath",[i],n,t)}};var $=Object.freeze({__proto__:null,getWifiInfo:function(e){return N(w,"getWifiInfo",[],null==e?void 0:e.success,null==e?void 0:e.fail)},request:function(e){return N(y,"request",[e],null==e?void 0:e.success,null==e?void 0:e.fail)},authRequest:function(e){return N(y,"authRequest",[e],null==e?void 0:e.success,null==e?void 0:e.fail)},assembleAuthUrl:function(e){return N(y,"assembleAuthUrl",[e],null==e?void 0:e.success,null==e?void 0:e.fail)}});var Y={scanner:function(e){return N(b,"scanner",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},voiceToText:function(e){return N(a,"voiceToText",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},copyText:function(e){return z(a,"copyText",[{text:e}])},tel:function(e){window.location.href="tel:"+e.number},vibrate:function(e){return N(m,"vibrate",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},generateBarcode:function(e){return N(p,"generateBarcode",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},generateQrcode:function(e){return N(p,"generateQrcode",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}};var Z=Object.freeze({__proto__:null,openEmail:function(e){return N(d,"openEmail",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},writeEmail:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(d,"writeEmail",[i],n,t,!1)}});var ee=Object.freeze({__proto__:null,getUserTicket:function(e){return N(c,"getUserTicket",[],null==e?void 0:e.success,null==e?void 0:e.fail)},biometric:function(e){return N(P,"routeBiometricAuthenticationLock",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});function ne(e,n,t){document.addEventListener(e,n,t)}var te=Object.freeze({__proto__:null,bindBackButtonEvent:function(n){cordova.exec(function(){},function(){},a,"overrideBack",[!0]),cordova.exec(function(e){"back"===e.action&&"function"==typeof n&&n()},function(){},a,"messageChannel",[])},bindPauseEvent:function(n){t()&&(i()&&ne("pause",function(e){if(f(n))return n(e)},!1),r()&&cordova.exec(function(e){"pause"===e.action&&f(n)&&n()},function(){},"CoreAndroid","messageChannel",[]))},bindResumeEvent:function(n){t()&&(i()&&ne("resume",function(e){if(f(n))return n(e)},!1),r()&&cordova.exec(function(e){"resume"===e.action&&f(n)&&n()},function(){},"CoreAndroid","messageChannel",[]))},unbindBackButtonEvent:function(){cordova.exec(function(){},function(){},a,"overrideBack",[!1])}});var ie=Object.freeze({__proto__:null,route:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(I,"route",[{scheme_url:i.schemeUrl}],n,t,!1)},searchInApp:function(){return z(s,"searchInApp",[])},showAppChatViewById:function(e){return z(s,"showAppChatView",[{app_id:e.appId,domain_id:e.domainId,org_id:e.orgId,session_type:e.sessionType}])},showAppListById:function(e){return z(I,"showAppListById",[{org_id:e.orgId}])}});var oe=Object.freeze({__proto__:null,showUserChatViewByUser:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(s,"showUserChatViewByUser",[i],n,t,!1)},openDiscussionById:function(e){return z(s,"openDiscussionById",[e])},createDiscussionChat:function(){return z(s,"createDiscussionChat",[])},selectDiscussionMembers:function(e){return N(s,"selectDiscussionMembers",[{discussion_id:e.discussionId,members_selected:(null==e?void 0:e.membersSelected)||[]}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}});var re=Object.freeze({__proto__:null,getCurrentUserInfo:function(e){return N(s,"getCurrentUserInfo",[{needEmpInfo:(null==e?void 0:e.needEmpInfo)||!1}],null==e?void 0:e.success,null==e?void 0:e.fail)},getCurrentEmployeeInfo:function(e){return N(s,"getCurrentEmployeeInfo",[{orgCode:(null==e?void 0:e.orgCode)||""}],null==e?void 0:e.success,null==e?void 0:e.fail)},getUserInfoByUserId:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(s,"getUserInfoByUserId",[i],n,t)},showUserInfoByUsername:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(s,"showUserInfoByUsername",[i],n,t,!1)}});function ue(e){return z(a,"navigation",[e]),0}var le=Object.freeze({__proto__:null,changeLeftButton:function(e){return z(a,"changeLeftButton",[e.items])},clearLeftButton:function(){return z(a,"clearLeftButton",[])},clearRightButtons:function(){return z(a,"clearRightButtons",[])},leftButton:function(e){return z(a,"leftButton",[e.method])},navigation:{lock:function(){ue("lock")},unlock:function(){ue("unlock")}},rightButtons:function(e){return z(a,"rightButtons",e.items)},setTitle:function(e){return z(a,"title",[e])},visibleLeftButton:function(e){return z(a,"visibleLeftButton",[e])},showSearchBar:function(e){return N(a,"searchBar",[{visible:!0,hint:(null==e?void 0:e.hint)||"",cancel_mode:(null==e?void 0:e.cancelMode)||"reset"}],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},hideSearchBar:function(){return z(a,"searchBar",[{visible:!1}])}});var se=Object.freeze({__proto__:null,addWaterMask:function(e){return z(a,"addWaterMask",[e])},changeOrientation:function(e){return z(a,"changeOrientation",[e])},exit:function(){return z(a,"exit",[])},openWebView:function(e){var n={url:e.url,title:e.title,use_android_webview:(null==e?void 0:e.useAndroidWebview)||!1,use_system_webview:(null==e?void 0:e.useSystemWebview)||!1,display_mode:(null==e?void 0:e.displayMode)||"",mute_config:(null==e?void 0:e.muteConfig)||[]};return null!=e&&e.orientation&&(n.orientation=null==e?void 0:e.orientation),z(a,"openWebView",[n])},removeWaterMask:function(){return z(a,"removeWaterMask",[])},share:function(e){return z(a,"share",[{url:e.url,title:e.title,cover_media_id:(null==e?void 0:e.coverMediaId)||"",cover_url:(null==e?void 0:e.coverUrl)||"",scope:e.scope,summary:e.summary,dicrectly:(null==e?void 0:e.dicrectly)||"",direct_session:null==e?void 0:e.directSession}])},wxShare:function(e){return z(a,"wxShare",[{app_id:e.appId,title:e.title,type:e.type,description:e.description,thumb:e.thumb,scene:e.scene,data:e.data}])},registerShakeListener:function(){return z(a,"registerShakeListener",[])},unregisterShakeListener:function(){return z(a,"unregisterShakeListener",[])},launchMiniProgram:function(e){var n=e.success,t=e.fail,i=o.__rest(e,["success","fail"]);return N(a,"launchMiniProgram",[i],n,t)},configPullRefresh:function(e){return N(a,"configPullRefresh",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},onPullRefresh:function(e){return N(a,"onPullRefresh",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},startPullRefresh:function(e){return N(a,"startPullRefresh",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},endPullRefresh:function(e){return N(a,"endPullRefresh",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}});function ce(e){return N(O,"showActionSheet",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}var ae=Object.freeze({__proto__:null,showLoading:function(e){return z(O,"showLoading",[o.__assign({},e)])},hideLoading:function(){return z(O,"hideLoading",[])},showToast:function(e){return e.duration||(e.duration=3e3),z(O,"showToast",[e])},showActionSheet:ce,showModal:function(e){return N(O,"showModal",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},showInputView:function(e){return N(O,"showInputView",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},popNotification:function(e){return N(U,"pop",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}});var de=Object.freeze({__proto__:null,getData:function(e){return N(L,"getData",[o.__assign({},e)])},putData:function(e){return z(L,"putData",[o.__assign({},e)])}});var fe={translateAudio:function(e){return N(W,"translateAudio",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},voiceRecord:function(e){return N(W,"voiceRecord",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}};var ve={startVideoRecoder:function(e){return N(W,"startVideoRecoder",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},playVideo:function(e){return N(W,"playVideo",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}};function pe(e){var t={image:{disabled:"video"===e.mediaType,edit:!0,result_includes:e.includeBase64?["base64"]:[]},video:{disabled:"photo"===e.mediaType},front:"front"===e.cameraType};return new Promise(function(c,n){N(l,"snapCamera",[t],void 0,void 0,!1).then(function(e){var n,t,i,o,r,u,l,s;"0"===e.code&&(s=void 0,(l=e.result).image?s={data:l.image.data,filename:l.image.filename,size:null===(n=l.image.info)||void 0===n?void 0:n.size,sourceURL:l.image.key,width:null===(t=l.image.info)||void 0===t?void 0:t.width,height:null===(i=l.image.info)||void 0===i?void 0:i.height,path:l.image.key,mime:null===(o=l.image.info)||void 0===o?void 0:o.mime_type}:l.video&&(s={data:l.video.thumbnail,filename:l.video.filename,size:null===(r=l.video.info)||void 0===r?void 0:r.size,sourceURL:l.video.path,path:l.video.path,mime:null===(u=l.video.info)||void 0===u?void 0:u.mime_type}),c(s))}).catch(function(e){n(e)})})}function me(e){var i=e.includeBase64?["base64"]:[];return e.edit?new Promise(function(n,t){N(l,"selectImageWithEdit",[{result_includes:i}],void 0,void 0,!1).then(function(e){n({data:e.data,filename:e.filename,size:e.imageInfo.size,sourceURL:e.key,width:e.imageInfo.width,height:e.imageInfo.height,path:e.key,mime:e.imageInfo.mime_type})}).catch(function(e){t(e)})}):new Promise(function(n,t){N(l,"selectImage",[{result_includes:i}],void 0,void 0,!1).then(function(e){n({data:e.data,filename:e.filename,size:e.imageInfo.size,sourceURL:e.key,width:e.imageInfo.width,height:e.imageInfo.height,path:e.key,mime:e.imageInfo.mime_type})}).catch(function(e){t(e)})})}console.log("测试js-sdk"),console.log("是否workplus移动平台",!~window.navigator.userAgent.indexOf("workplus")),~window.navigator.userAgent.indexOf("workplus")||(console.log("old-sdk"),function(e){console.log("createMoaSdkScritpTag");var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(n)}("http://cdn.gf.com.cn/moa/sdk/jssdk-0.0.12.js"),function(e){var n;console.log("removeCurrentSDKScriptTag");for(var t,i=document.getElementsByTagName("script"),o=0;o<i.length;o+=1){var r=i[o];if(r.src&&~r.src.indexOf("/"+e)){t=r;break}}t&&null!==(n=t.parentNode)&&void 0!==n&&n.removeChild(t)}("jssdk-0.0.13.js"));function _e(e){return N(S,"config",[e],null==e?void 0:e.success,null==e?void 0:e.fail,!1)}function ge(n){return N(S,"ready",[],function(e){j.warn("SDK 已就绪！（ready 事件被触发）"),n(e)},function(){},!1)}function he(e){return N(S,"checkApi",[e],null==e?void 0:e.success,null==e?void 0:e.fail)}function we(e,n,t){t||B(n),e.prototype.$w6s={version:ye,image:be,contact:Pe,user:ke,session:Ie,app:Se,webview:Le,header:Oe,util:We,location:Ue,device:Re,eventlog:Ce,file:Ee,network:Ae,email:De,auth:Be,event:Te,ready:ge,config:_e,deviceready:Me,exec:Fe,execSync:Ve,error:qe,checkApi:he,dialog:xe,storage:je,record:Ke,video:Ne},t&&(e.prototype.$w6s.init=ze)}var ye="v0.0.13",be=V,Pe=q,ke=re,Ie=oe,Se=ie,Le=se,Oe=le,We=Y,Ue=J,Re=G,Ce=H,Ee=X,Ae=$,De=Z,Be=ee,Te=te,xe=ae,je=de,Ke=fe,Ne=ve,ze=B,Me=T,Fe=N,Ve=z,qe=x;"undefined"!=typeof window&&window.Vue&&we(window.Vue,null,!0),e.app=Se,e.auth=Be,e.checkApi=he,e.chooseInvoice=function(e){return N(v,"wechatInvoice",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},e.closeWebView=function(){return z(a,"exit",[])},e.config=_e,e.contact=Pe,e.device=Re,e.deviceready=Me,e.dialog=xe,e.email=De,e.error=qe,e.event=Te,e.eventEmitter=function(e,n){return n.action="webTrigger."+e,N(a,"sendBroadcast",[n],void 0,void 0,!1)},e.eventlog=Ce,e.exec=Fe,e.execSync=Ve,e.file=Ee,e.getDeviceInfo=function(){return new Promise(function(n,t){N(m,"getDeviceInfo",[]).then(function(e){n({imei:e.device_id,os:e.platform,osVersion:e.system_version,alias:e.system_model,appVersion:e.product_version})}).catch(function(e){t(e)})})},e.header=Oe,e.image=be,e.imagePicker=function(t){return t.onlyPick?("camera"===t.onlyPick?pe:me)(t):ce({item_list:["拍照","相册"]}).then(function(e){var n=e.hasOwnProperty("tap_index")?"tap_index":"tapIndex";return(0===e[n]?pe:me)(t)})},e.init=ze,e.install=we,e.isRNMoa=function(){return!!~window.navigator.userAgent.indexOf("workplus")},e.isWXAppInstalled=function(){return new Promise(function(n,t){N(I,"isWxInstalled",[],function(e){n(0===e.code)},function(e){t(e)},!1)})},e.location=Ue,e.native={},e.network=Ae,e.openWebview=function(e,n){return z(a,"openWebView",[{url:e,title:n.title,use_android_webview:!1,use_system_webview:!1,display_mode:n.noHead?"FULL_SCREEN":"",orientation:1}])},e.preview=function(t,e,i){return N(h,"getUserFilePath",[{system:"file"}],function(e){var n;e.result&&X.download({source:t+"?gf_sso_auth=1&gf_portal_auth=1",target:n=e.result+"/"+i,success:function(){X.readFile({path:n})},fail:function(){}})},function(){})},e.previewDoc=function(e){return z(h,"gfReadDocDetail",[{doc_id:encodeURIComponent(e)}])},e.previewImg=function(e){return z(l,"showImages",[{urls:e}])},e.ready=ge,e.record=Ke,e.register=function(t){return N(a,"registerBroadcast",[{actions:["webTrigger."+t]}],function(e){var n;e&&(console.log("创建并分发事件",e),n=new CustomEvent(t,{detail:e}),window.dispatchEvent(n))},function(e){console.log(e)},!1)},e.scanCode=function(e){return N(b,"scanner",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},e.selectUser=function(e,n,t){void 0===e&&(e=!1),void 0===n&&(n=[]);var i={selectedEmpList:n.map(function(e){var n=[{name:"部门id",property:"custom_deptId",value:e.deptId},{name:"部门名称",property:"custom_dept",value:e.dept},{name:"ERP编号",property:"custom_ERPno",value:e.erpNo}];return e.isLevelOneDept&&n.push({name:"部门综合员",property:"local_gfSelectDeptAdmin"}),{id:e.id,username:e.id,domain_id:"",user_id:e.id,userId:e.id,name:e.display,display_name:e.display,email:"",mobile:e.phone,avatar:"",initial:"",status:"",birthday:"",created:0,disabled:0!==e.isUsed,employee_type:e.type,employee_type_id:"",nickname:"",org_code:"",pinyin:"",positions:[{job_title:"",org_name:"",org_id:"",corp_name:"",path:"",full_name_path:"",type:"",primary:""}],properties:n}}),hideMe:!1,max:e?t.maxNum:1,searchLimit:t.searchLimit,selectedType:"username",customEmpList:{type:"username",usernames:t.users||[]},customScope:t.banAdmin?"":"gfSelectDeptAdmin"};return e||delete i.selectedEmpList,t.users&&0!==t.users.length||delete i.customEmpList,new Promise(function(t,n){N(s,"getEmployeesFromCurrentOrg",[i],function(e){console.log("users",e);var n=e.map(function(e){var n=e.properties.find(function(e){return"custom_deptId"===e.property}),t=e.properties.find(function(e){return"custom_dept"===e.property}),i=e.properties.find(function(e){return"local_gfSelectDeptAdmin"===e.property}),o=e.properties.find(function(e){return"custom_ERPno"===e.property});return{orgType:"",groupName:"",phone:e.mobile,isUsed:e.disabled?0:1,erpNo:o&&o.value,isParent:"",pid:"",display:e.name,type:"",unitedCode:"",id:e.username,deptUnitedCode:"",name:i?e.name+"(文件综合员)":e.name+"("+(t&&t.value)+")",dept:t&&t.value,deptCode:"",oaName:e.name,deptId:n&&n.value,isLevelOneDept:!!i}});t(n)},function(e){n(e)},!1)})},e.session=Ie,e.setTitle=function(e){return z(a,"title",[e])},e.shareSwitch=function(e,n){return z(a,"openWebView",[{hidden_share:e?1:0,share_config:{title:n.title,cover_url:(null==n?void 0:n.imgUrl)||"",scope_includes:n.customShare,summary:n.description}}])},e.showShare=function(e){var n=new Map([["QQ","qq_session"],["WeChat","wx_session"],["TimeLine","wx_timeline"],["Qzone","qq_zone"]]),t=e.customShare.map(function(e){return n.get(e)||""});return z(a,"share",[{title:e.title,cover_url:(null==e?void 0:e.imgUrl)||"",scope_includes:t,summary:e.description}])},e.storage=je,e.user=ke,e.util=We,e.version=ye,e.video=Ne,e.watermark=function(e,n,t){return z(a,"addWaterMask",[{textColor:n,content:e,alpha:t}])},e.webview=Le,Object.defineProperty(e,"__esModule",{value:!0})});
